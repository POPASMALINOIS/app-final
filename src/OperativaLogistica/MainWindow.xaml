<Window x:Class="OperativaLogistica.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Operativa Logística" Height="800" Width="1400">
    <DockPanel>

        <!-- Menú simple (usa los mismos handlers del code-behind) -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Archivo">
                <MenuItem Header="Importar..." Click="Import_Click"/>
                <MenuItem Header="Exportar CSV..." Click="ExportCsv_Click"/>
                <Separator/>
                <MenuItem Header="Guardar PDF..." Click="SavePdf_Click"/>
                <Separator/>
                <MenuItem Header="Salir" Click="Exit_Click"/>
            </MenuItem>
            <MenuItem Header="_Jornada">
                <MenuItem Header="Nueva jornada" Click="NewDay_Click"/>
            </MenuItem>
            <MenuItem Header="_Pestañas">
                <MenuItem Header="Nueva pestaña" Click="NewTab_Click"/>
                <MenuItem Header="Cerrar pestaña" Click="CloseTab_Click"/>
            </MenuItem>
            <MenuItem Header="_Ayuda">
                <MenuItem Header="Acerca de..." Click="About_Click"/>
            </MenuItem>
        </Menu>

        <!-- GRID PRINCIPAL -->
        <DataGrid x:Name="dg"
                  ItemsSource="{Binding SesionActual.Operaciones}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  IsReadOnly="False"
                  SelectionMode="Extended"
                  SelectionUnit="FullRow">
            <!-- …tus columnas aquí… -->
        </DataGrid>

            <!-- Columnas explícitas (encabezado = propiedad) -->
            <DataGrid.Columns>
                <DataGridTextColumn Header="Id"            Binding="{Binding Id}" />
                <DataGridTextColumn Header="Transportista" Binding="{Binding Transportista}" Width="200"/>
                <DataGridTextColumn Header="Matricula"     Binding="{Binding Matricula}" />
                <DataGridTextColumn Header="Muelle"        Binding="{Binding Muelle}" />
                <DataGridTextColumn Header="Estado"        Binding="{Binding Estado}" />
                <DataGridTextColumn Header="Destino"       Binding="{Binding Destino}" Width="220" />

                <DataGridTextColumn Header="Llegada"       Binding="{Binding Llegada}" />
                <DataGridTextColumn Header="LlegadaReal"   Binding="{Binding LlegadaReal}" />
                <DataGridTextColumn Header="SalidaReal"    Binding="{Binding SalidaReal}" />
                <DataGridTextColumn Header="SalidaTope"    Binding="{Binding SalidaTope}" />

                <DataGridTextColumn Header="Observaciones" Binding="{Binding Observaciones}" Width="*" />
                <DataGridTextColumn Header="Incidencias"   Binding="{Binding Incidencias}" Width="*" />

                <DataGridTextColumn Header="Fecha"         Binding="{Binding Fecha}" />
                <DataGridTextColumn Header="Precinto"      Binding="{Binding Precinto}" />

                <!-- Lex como bool para evitar cadenas raras -->
                <DataGridCheckBoxColumn Header="Lex"       Binding="{Binding Lex}" />

                <!-- Lado: ItemsSource = lista de strings / SelectedItem = string -->
                <DataGridComboBoxColumn Header="Lado"
                                        ItemsSource="{Binding DataContext.Config.Lados, RelativeSource={RelativeSource AncestorType=Window}}"
                                        SelectedItemBinding="{Binding Lado, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            </DataGrid.Columns>
        </DataGrid>

    </DockPanel>
</Window>
