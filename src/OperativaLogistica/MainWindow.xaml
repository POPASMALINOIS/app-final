<Window x:Class="OperativaLogistica.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="PLM INDITEX EXPEDICION" Height="900" Width="1600">

    <DockPanel>

        <!-- ========= MENÚ SUPERIOR (usa Click handlers del code-behind) ========= -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Archivo">
                <MenuItem Header="Nueva pestaña" Click="NewTab_Click"/>
                <MenuItem Header="Cerrar pestaña" Click="CloseTab_Click"/>
                <Separator/>
                <MenuItem Header="Importar (Excel/CSV)" Click="Import_Click"/>
                <MenuItem Header="Exportar CSV" Click="ExportCsv_Click"/>
                <MenuItem Header="Guardar PDF" Click="SavePdf_Click"/>
                <MenuItem Header="Nueva jornada (vaciar día)" Click="NewDay_Click"/>
                <Separator/>
                <MenuItem Header="Salir" Click="Exit_Click"/>
            </MenuItem>
            <MenuItem Header="Ay_uda">
                <MenuItem Header="Acerca de..." Click="About_Click"/>
            </MenuItem>
        </Menu>

        <!-- ========= BARRA SUPERIOR (Fecha / Buscar / Lado) ========= -->
        <Border DockPanel.Dock="Top" Background="#EEE" Padding="8">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="Fecha:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                <DatePicker SelectedDate="{Binding FechaActual}" Width="140" Margin="0,0,12,0"/>

                <TextBlock Text="Buscar:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                <!-- Sin binding para evitar dependencias: puedes cablearlo más tarde -->
                <TextBox Width="220" Margin="0,0,12,0"/>

                <TextBlock Text="Lado:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                <!-- Lista fija LADO 0..9 y binding solo a SelectedItem (existe en el VM) -->
                <ComboBox Width="130"
                          SelectedItem="{Binding LadoSeleccionado}"
                          Margin="0,0,12,0">
                    <ComboBoxItem>LADO 0</ComboBoxItem>
                    <ComboBoxItem>LADO 1</ComboBoxItem>
                    <ComboBoxItem>LADO 2</ComboBoxItem>
                    <ComboBoxItem>LADO 3</ComboBoxItem>
                    <ComboBoxItem>LADO 4</ComboBoxItem>
                    <ComboBoxItem>LADO 5</ComboBoxItem>
                    <ComboBoxItem>LADO 6</ComboBoxItem>
                    <ComboBoxItem>LADO 7</ComboBoxItem>
                    <ComboBoxItem>LADO 8</ComboBoxItem>
                    <ComboBoxItem>LADO 9</ComboBoxItem>
                </ComboBox>
            </StackPanel>
        </Border>

        <!-- ========= PESTAÑAS ========= -->
        <!-- Se enlaza a Pestanas (ObservableCollection<object>) y SesionActual (object) -->
        <TabControl ItemsSource="{Binding Pestanas}" SelectedItem="{Binding SesionActual}">
            <!-- Título de cada pestaña: si tu objeto no tiene nombre, mostramos texto genérico -->
            <TabControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="Operativa" />
                </DataTemplate>
            </TabControl.ItemTemplate>

            <!-- Contenido: placeholder con DataGrid (AutoGenerate) para que compile siempre.
                 Si tu objeto de pestaña expone 'Operaciones', se pintará; si no, queda vacío
                 sin romper el binding. -->
            <TabControl.ContentTemplate>
                <DataTemplate>
                    <DockPanel>
                        <TextBlock DockPanel.Dock="Top"
                                   Margin="8"
                                   Foreground="Gray"
                                   Text="Pestaña nueva. Importa una operativa desde Archivo → Importar (Excel/CSV)."/>
                        <DataGrid x:Name="GridOps"
                                  AutoGenerateColumns="True"
                                  IsReadOnly="False"
                                  ItemsSource="{Binding Operaciones}"
                                  CanUserAddRows="True"
                                  CanUserResizeColumns="True"
                                  HeadersVisibility="All"/>
                    </DockPanel>
                </DataTemplate>
            </TabControl.ContentTemplate>
        </TabControl>
    </DockPanel>
</Window>
